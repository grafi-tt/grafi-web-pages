= GCC-4.4.1の-O3でハマる

何となく速くなりそう、という適当な理由でGentooではGCCの不安定版を使って最適化をO3にしてるのですが、そのせいで思わぬ所で足元をすくわれた。

http://bugs.gentoo.org/show_bug.cgi?id=282341

要は、システムがGCC-4.4.1、-O3でビルドされてるとhalが機能しない、とのことで。最適化し過ぎらしい。

[source,sh]
--------------------
/usr/sbin/hald --no-daemon
--------------------

が落ちるのでそのエラーメッセージでググればすぐに見つかったけど、そこまでたどり着くのにやたらと遠回りしてしまった。hal関連のエラーは出てたから設定とかは調べて、halまわりの再emergeとかしたけど、まさかinit.dからhaldを起動した後に無言でプロセスが落ちてるとは思いもよらなかった…。自分の問題の切り分け方の下手さを再認識。

GCC関連の問題でハマるのは始めててで、正直戸惑いました。上記リンクにも有るけど、-O3なんて使うもんが悪い、ということで、やっぱり-O2にしとくのがいいようです。一部の大型のライブラリとかじゃどっちみち強制的に-O2でビルドされるし。

'''

さて、halが動いたのは良いけど、別の問題でXがどうしても動かない…。仕方なく再インストール中。ディレクトリ作って、chrootして、GCCを安定版にした上で、-O3でemerge worldだーー（オイ
